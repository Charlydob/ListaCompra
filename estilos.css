/* === Opal UI – ambient + glass === */
:root{
  --bg-1:#0e1116;
  --bg-2:#0b0d12;
  --glass: rgba(255,255,255,.06);
  --glass-2: rgba(255,255,255,.08);
  --stroke: rgba(255,255,255,.10);
  --txt:#e9f1ff;
  --muted:#b7c1d6;
  --opal-cyan:#5ee8ff;
  --opal-teal:#49d3c6;
  --opal-blue:#4590ff;
  --opal-amber:#ffb24d;
  --danger:#ff5865;
}

*{box-sizing:border-box}
html,body{max-width:100vw;overflow-x:hidden;touch-action:manipulation}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:var(--txt);
  background:
    radial-gradient(1200px 800px at 20% 0%, #12303a88 0%, transparent 60%),
    radial-gradient(900px 700px at 85% 20%, #26225877 0%, transparent 60%),
    radial-gradient(900px 700px at 10% 90%, #1c3a2f66 0%, transparent 60%),
    linear-gradient(180deg, var(--bg-1), var(--bg-2));
  min-height:100vh;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}

/* Ambient glow orbs (muy Opal) */
body::before, body::after{
  content:"";
  position:fixed; inset:auto;
  width:420px; height:420px; border-radius:50%;
  filter: blur(60px);
  z-index:-1; opacity:.35; pointer-events:none;
}
body::before{left:-120px; top:-80px;background:radial-gradient(circle,#3ee6ff,#2b9fff22 60%,transparent 70%); animation:float1 16s ease-in-out infinite}
body::after{right:-140px; bottom:-120px;background:radial-gradient(circle,#ffcf6a,#ff6a3e22 60%,transparent 70%); animation:float2 18s ease-in-out infinite}
@keyframes float1{0%,100%{transform:translateY(0)}50%{transform:translateY(18px)}}
@keyframes float2{0%,100%{transform:translateY(0)}50%{transform:translateY(-22px)}}

/* Vignette sutil */
#app::before{
  content:"";
  position:fixed; inset:0;
  background: radial-gradient(1200px 900px at 50% -200px, transparent 60%, rgba(0,0,0,.45) 100%);
  pointer-events:none; z-index:0;
}

#app{position:relative; z-index:1; max-width:480px; margin:auto; padding:14px}

/* ===== Header (glass card con halo) ===== */
header{
  display:flex; flex-direction:column; gap:10px; align-items:center;
  margin-bottom:4px; padding:14px;
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid var(--stroke);
  border-radius:18px;
  box-shadow:
    0 20px 40px rgba(0,0,0,.35),
    0 0 0 1px rgba(255,255,255,.03) inset,
    0 0 35px 0 rgba(94,232,255,.08);
  backdrop-filter: blur(10px);
}

#total-estimado{
  font-weight:700; letter-spacing:.2px;
  background: linear-gradient(90deg, var(--opal-cyan), var(--opal-blue));
  -webkit-background-clip:text; background-clip:text; color:transparent;
}

/* Inputs Opal */
select, input[type="text"], input[type="number"]{
  width:100%;
  padding:12px 14px; font-size:16px; color:var(--txt);
  background:var(--glass);
  border:1px solid var(--stroke); border-radius:12px;
  outline:none; backdrop-filter: blur(6px);
  transition: box-shadow .15s, border-color .15s, transform .05s;
}
select:focus, input:focus{
  border-color:#6de3ff88;
  box-shadow:0 0 0 6px #5ee8ff16, 0 10px 24px #0006;
  transform: translateY(-1px);
}

#btn-agregar{
  width:100%;
  padding:12px 14px; font-size:16px; font-weight:600; cursor:pointer;
  color:#031017; border:none; border-radius:14px;
  background: linear-gradient(90deg, var(--opal-cyan), var(--opal-blue));
  box-shadow: 0 8px 24px rgba(69,144,255,.35), 0 0 0 1px #ffffff0f inset;
  transition: transform .06s ease, box-shadow .15s ease;
}
#btn-agregar:active{transform:translateY(1px); box-shadow:0 4px 16px rgba(69,144,255,.28)}

/* ===== Grupos y títulos ===== */
.supermercado-grupo{margin-top:20px}
.supermercado-titulo{
  font-weight:700; font-size:17px; padding:10px 14px; border-radius:12px;
  color:#f4fbff;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid var(--stroke);
  box-shadow: 0 10px 24px rgba(0,0,0,.35), 0 0 24px rgba(94,232,255,.08) inset;
  display:flex; align-items:center; gap:8px;
}
.supermercado-titulo::before{
  content:""; width:10px; height:10px; border-radius:50%;
  background: radial-gradient(circle, var(--opal-cyan), #3adbff00 70%);
  box-shadow:0 0 12px var(--opal-cyan);
}

/* ===== Tarjetas ===== */
.contenedor-tarjetas{margin-top:12px; display:flex; flex-direction:column; gap:10px}

.tarjeta-producto{
  display:flex; align-items:center; gap:12px; position:relative;
  padding:12px; border-radius:16px;
  background: linear-gradient(140deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid var(--stroke);
  box-shadow:
    0 14px 28px rgba(0,0,0,.35),
    0 0 0 1px rgba(255,255,255,.02) inset;
  backdrop-filter: blur(8px);
  transition: transform .08s ease, opacity .2s ease, box-shadow .15s ease;
}
.tarjeta-producto:hover{transform:translateY(-1px); box-shadow:0 18px 34px rgba(0,0,0,.38), 0 0 34px #5ee8ff10 inset}

.tarjeta-comprado{opacity:.45; filter:saturate(.7)}
.tarjeta-producto img{
  width:54px; height:54px; object-fit:cover; border-radius:12px;
  box-shadow: 0 8px 18px rgba(0,0,0,.45);
  border:1px solid rgba(255,255,255,.08);
}
.checkbox{
  position:absolute; top:10px; left:10px; transform:scale(1.3);
  accent-color: var(--opal-cyan);
  filter: drop-shadow(0 0 8px #5ee8ff55);
}

.nombre-producto{flex:1; font-size:16px}

/* Cantidad (+/– + chip) */
.contador{
  font-size:16px; min-width:36px; text-align:center;
  padding:6px 10px; border-radius:12px; user-select:none;
  background:var(--glass-2); color:var(--txt);
  border:1px solid var(--stroke); backdrop-filter: blur(4px);
}
.controles-cantidad{display:flex; align-items:center; gap:8px}
.btn-qty{
  min-width:36px; padding:6px 10px; border-radius:12px; border:1px solid var(--stroke);
  background:var(--glass); color:var(--txt); cursor:pointer;
  transition: transform .06s, box-shadow .15s, background .15s;
  backdrop-filter: blur(4px);
}
.btn-qty:active{transform:translateY(1px)}
.btn-qty:hover{box-shadow:0 0 0 6px #5ee8ff14}

/* ===== Modal ===== */
.modal{
  position:fixed; inset:0; display:flex; justify-content:center; align-items:center;
  background: radial-gradient(1200px 800px at 50% 0%, #0a172080 0%, #000a 70%);
  z-index:999; padding:20px; backdrop-filter: blur(6px);
}
.modal-contenido-opal-horizontal{
  width:100%; max-width:470px; max-height:calc(100vh - 40px); overflow:auto;
  display:flex; flex-direction:column;
  background: linear-gradient(160deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid var(--stroke); border-radius:22px;
  box-shadow: 0 24px 60px rgba(0,0,0,.6), 0 0 60px #5ee8ff14 inset;
}
.imagen-lateral{
  width:100%; display:flex; justify-content:center; padding:10px 10px 6px;
  background: radial-gradient(380px 200px at 50% 0%, #1b2a2f 0%, transparent 70%);
  border-bottom:1px solid var(--stroke);
}
.imagen-lateral img{
  max-width:96%; max-height:240px; border-radius:14px; object-fit:cover;
  border:1px solid rgba(255,255,255,.08); box-shadow:0 14px 28px rgba(0,0,0,.45);
}

.campos-laterales{
  display:grid; grid-template-columns:1fr 2fr; gap:12px 14px; padding:18px 20px 10px;
  align-items:center;
}
.campos-laterales h2{
  grid-column:1/-1; margin:0 0 6px; text-align:center; font-size:19px;
}
.campos-laterales label{font-size:13px; color:var(--muted); text-align:right}
.campos-laterales input,.campos-laterales select{
  width:100%; padding:10px 12px; font-size:15px; color:var(--txt);
  border-radius:12px; border:1px solid var(--stroke); background:var(--glass);
  backdrop-filter: blur(6px);
}

.modal-botones{
  grid-column:1/-1; display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:16px;
}
.modal-botones button{
  padding:12px; border:none; border-radius:12px; font-weight:600; cursor:pointer;
  background:linear-gradient(90deg, var(--opal-cyan), var(--opal-blue)); color:#021219;
  box-shadow:0 10px 24px rgba(69,144,255,.30);
}
.modal-botones button:nth-child(2){
  background: linear-gradient(90deg, #ff8aa1, #ff5865); color:#1a0407;
  box-shadow:0 10px 24px rgba(255,88,101,.28);
}
.modal-botones button:nth-child(3){
  background: linear-gradient(90deg, #9da8b6, #6c7a8e); color:#0c1016;
  box-shadow:0 10px 24px rgba(30,40,54,.28);
}

.oculto{display:none}

/* ===== Accesibilidad / detalles ===== */
:focus-visible{outline:2px solid #6de3ff; outline-offset:2px; border-radius:12px}
::-webkit-scrollbar{width:10px} 
::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12); border-radius:8px}
::-webkit-scrollbar-track{background:transparent}

/* ===== Pequeños helpers (si quieres usarlos en el HTML/JS) ===== */
.badge{
  padding:4px 8px; font-size:12px; border-radius:999px; color:#021219;
  background: linear-gradient(90deg, var(--opal-amber), #ffdca1);
  box-shadow:0 6px 18px rgba(255,188,87,.25);
}
.state-productivo{color:#a7ffea}
.state-distrayendo{color:#ff8aa1}

/* Opcional: si en JS añades contenedor de cantidad con clase */
.controles-cantidad .btn-qty{background:var(--glass)}
/* ====== Recetas (estilos nuevos, no alteran lo existente) ====== */
.tarjeta-receta{
  display:flex; align-items:center; gap:12px; position:relative;
  padding:12px; border-radius:16px;
  background: linear-gradient(140deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid var(--stroke);
  box-shadow:0 14px 28px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.02) inset;
  backdrop-filter: blur(8px);
}
.tarjeta-receta img{
  width:54px; height:54px; object-fit:cover; border-radius:12px;
  border:1px solid rgba(255,255,255,.08);
}
.titulo-receta{flex:1; font-weight:600}
.macros{display:flex; gap:6px; flex-wrap:wrap}
.mchip{
  font-size:12px; padding:2px 8px; border-radius:999px;
  border:1px solid var(--stroke); color:#b7c1d6;
}
.btn-inline{
  min-width:36px; padding:6px 10px; border-radius:12px; border:1px solid var(--stroke);
  background:var(--glass); color:var(--txt); cursor:pointer;
}
.ing-row, .paso-row{display:flex; gap:8px}
.ing-row input[type="text"]{flex:1}
.ing-row input[type="number"]{width:96px}
.ing-row select{width:84px}
/* --- Tabs suaves (no pisa estilos previos) --- */
.tab-soft{
  flex:1; padding:10px; border-radius:10px; border:1px solid var(--stroke);
  background: rgba(255,255,255,.06); color: var(--txt); margin-bottom: 12px;
}
.tab-soft.active{ outline:2px solid var(--accent); }

/* --- Tarjeta receta reutiliza tu .lista/.card si ya existe; añadimos chips --- */
.receta-card{
  display:flex; gap:10px; align-items:center; padding:12px; border-radius:14px;
  border:1px solid var(--stroke); background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));
}
.receta-card img{ width:56px; height:56px; object-fit:cover; border-radius:10px; border:1px solid var(--stroke) }
.receta-info{ flex:1 }
.receta-chips{ display:flex; gap:6px; flex-wrap:wrap; }
.receta-chip{ font-size:11px; padding:2px 8px; border-radius:999px; border:1px solid var(--stroke); color:#b7c1d6; }
/* ===== Detalle Receta (nuevo) ===== */
.r-det{display:grid; grid-template-columns: 200px 1fr; gap:16px; max-width:900px}
.r-det-col-izq{display:flex; flex-direction:column; gap:10px; align-items:center; padding:10px}
.r-det-col-izq img{width:180px; height:180px; object-fit:cover; border-radius:14px; border:1px solid var(--stroke)}
.r-det-macros{display:flex; gap:6px; flex-wrap:wrap; justify-content:center}
.r-chip{font-size:12px; padding:2px 8px; border-radius:999px; border:1px solid var(--stroke); color:#b7c1d6}

.r-det-col-der{display:flex; flex-direction:column; gap:12px; padding:12px}
.r-edit[contenteditable="true"]{outline:none; border-bottom:1px dashed transparent}
.r-edit.r-editing{border-bottom-color: var(--stroke); background: rgba(255,255,255,.04); border-radius:6px; padding:2px 4px}

.r-bloque{display:flex; flex-direction:column; gap:8px}
.r-bloque-header{display:flex; align-items:center; justify-content:space-between}
.r-bot-row{display:flex; gap:8px}

.r-ings{list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:6px}
.r-ing-item{display:grid; grid-template-columns: 1fr 90px 70px 32px; gap:8px; align-items:center}
.r-ing-nom,.r-ing-cant,.r-ing-uni{border:1px dashed transparent; border-radius:6px; padding:4px 6px}
.r-ing-nom.r-editing,.r-ing-cant.r-editing,.r-ing-uni.r-editing{border-color: var(--stroke); background: rgba(255,255,255,.04)}
.r-ing-x{border:1px solid var(--stroke); background:var(--card); color:var(--txt); border-radius:8px; padding:6px}

.r-pasos{margin:0; padding-left:22px; display:flex; flex-direction:column; gap:6px}
.r-paso{display:grid; grid-template-columns: 1fr 32px; gap:8px; align-items:center}
.r-paso .r-paso-txt{border:1px dashed transparent; border-radius:6px; padding:4px 6px}
.r-paso .r-paso-txt.r-editing{border-color: var(--stroke); background: rgba(255,255,255,.04)}

.r-botones{display:flex; gap:8px; justify-content:flex-end}
/* ==== Recetas: barra y botones ==== */

/* Input buscar */
#buscar-recetas{
  width:100%;
  padding:10px 12px;
  border:1px solid var(--stroke);
  background:#0f1320;
  color:var(--txt);
  border-radius:10px;
  outline: none;
}
#buscar-recetas::placeholder{ color: var(--muted); }

/* Botón "Nueva" */
#btn-nueva-receta{
  padding:10px 12px;
  border-radius:10px;
  border:1px solid var(--stroke);
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
  color: var(--txt);
  cursor:pointer;
  transition: transform .06s ease, background .2s ease, box-shadow .2s ease;
  box-shadow: 0 6px 18px rgba(0,0,0,.25);
}
#btn-nueva-receta:hover{ background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.04)); }
#btn-nueva-receta:active{ transform: translateY(1px) scale(.99); }
#btn-nueva-receta:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }

/* Lista de recetas: botones de cada tarjeta */
#lista-recetas .receta-card button{
  border:1px solid var(--stroke);
  background: var(--card);
  color: var(--txt);
  padding:8px 10px;
  border-radius:10px;
  cursor:pointer;
  transition: transform .06s ease, background .2s ease;
}
#lista-recetas .receta-card button:hover{ background: rgba(255,255,255,.10); }
#lista-recetas .receta-card button:active{ transform: translateY(1px) scale(.99); }
#lista-recetas .receta-card button:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }

/* Opcional: refuerzo de layout de la toolbar (no pisa estilos existentes) */
#vista-recetas .recetas-toolbar{
  display:flex; gap:8px; align-items:center;
}
/* Checkbox en ingredientes del detalle */
.r-ing-item{display:grid; grid-template-columns: 26px 1fr 90px 70px 32px; gap:8px; align-items:center}
.r-ing-check{appearance:none; width:18px; height:18px; border:1px solid var(--stroke); border-radius:4px; background:var(--card); cursor:pointer; display:inline-block; position:relative}
.r-ing-check:checked::after{content:""; position:absolute; inset:3px; background:var(--accent); border-radius:2px}
#r-det-a-lista{
  border:1px solid var(--stroke); border-radius:10px; padding:8px 10px;
  background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
  color:var(--txt); cursor:pointer;
}
#r-det-a-lista:disabled{opacity:.6; cursor:default}
/* Ingredientes con checkbox clicable */
.r-ing-item{display:grid; grid-template-columns: 26px 1fr 90px 70px 32px; gap:8px; align-items:center}
.r-ing-check{appearance:none; width:18px; height:18px; border:1px solid var(--stroke); border-radius:4px; background:var(--card); cursor:pointer; display:inline-block; position:relative}
.r-ing-check:focus-visible{outline:2px solid var(--accent); outline-offset:2px}
.r-ing-check:checked::after{content:""; position:absolute; inset:3px; background:var(--accent); border-radius:2px}

/* Pasos: mantener numeración del <ol> */
.r-pasos{margin:0; padding-left:22px; list-style: decimal; display:block}
.r-paso{display:list-item}
.r-paso-line{display:flex; gap:8px; align-items:flex-start}
.r-paso .r-paso-txt{border:1px dashed transparent; border-radius:6px; padding:4px 6px}
.r-paso .r-paso-txt.r-editing{border-color: var(--stroke); background: rgba(255,255,255,.04)}
/* ======= Receta: tarjeta móvil ======= */
.receta-card{
  display:grid;
  grid-template-columns:64px 1fr;
  grid-template-areas:
    "img title"
    "img chips"
    "img actions";
  gap:10px;
  align-items:center;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));
}
.receta-card img{ grid-area:img; width:64px; height:64px; object-fit:cover; border-radius:10px; border:1px solid var(--stroke) }
.receta-info{ grid-area:title }
.receta-chips{ grid-area:chips; display:flex; gap:6px; flex-wrap:wrap; }
.receta-acciones{ grid-area:actions; display:flex; gap:6px; flex-wrap:wrap; }
.receta-acciones button{
  border:1px solid var(--stroke); background:var(--card); color:var(--txt);
  padding:8px 10px; border-radius:10px; cursor:pointer;
}
@media (min-width:600px){
  .receta-card{
    grid-template-columns:80px 1fr auto;
    grid-template-areas:
      "img title actions"
      "img chips actions";
  }
  .receta-card img{ width:80px; height:80px; }
}

/* ======= Modal detalle: checkbox ingredientes (tap fiable) ======= */
.r-ing-item{display:grid; grid-template-columns:26px 1fr 90px 70px 32px; gap:8px; align-items:center}
.r-ing-check-wrap{ width:18px; height:18px; display:flex; align-items:center; justify-content:center }
.r-ing-check{
  -webkit-appearance:none; appearance:none; width:18px; height:18px;
  border:1px solid var(--stroke); border-radius:4px; background:var(--card);
  cursor:pointer; position:relative; pointer-events:auto;
}
.r-ing-check:focus-visible{ outline:2px solid var(--accent); outline-offset:2px }
.r-ing-check:checked::after{ content:""; position:absolute; inset:3px; background:var(--accent); border-radius:2px }

/* Pasos visibles con numeración nativa */
.r-pasos{ margin:0; padding-left:22px; list-style:decimal; display:block }
.r-paso{ display:list-item }
.r-paso-line{ display:flex; gap:8px; align-items:flex-start }
.r-paso .r-paso-txt{ border:1px dashed transparent; border-radius:6px; padding:4px 6px }
.r-paso .r-paso-txt.r-editing{ border-color:var(--stroke); background:rgba(255,255,255,.04) }
/* Fix layout ingredientes: incluye columna para checkbox */
.r-ing-item{
  grid-template-columns: 26px 1fr 90px 70px 32px !important;
}

/* Checkbox táctil fiable en iOS/Android */
.r-ing-check-wrap{ width:18px; height:18px; display:flex; align-items:center; justify-content:center }
.r-ing-check{
  -webkit-appearance:none; appearance:none; width:18px; height:18px;
  border:1px solid var(--stroke); border-radius:4px; background:var(--glass);
  cursor:pointer; position:relative; pointer-events:auto;
}
.r-ing-check:focus-visible{ outline:2px solid var(--opal-cyan); outline-offset:2px }
.r-ing-check:checked::after{ content:""; position:absolute; inset:3px; background:var(--opal-cyan); border-radius:2px }
/* =========================
   RECETA – ESTILOS PENDIENTES
   ========================= */

/* Pie del modal (guardar/cerrar) */
#modal-receta-detalle .r-botones{
  display:flex;
  gap:8px;
  justify-content:flex-end;   /* a la derecha */
  margin-top:8px;
}
#modal-receta-detalle .r-botones button{
  padding:8px 12px;
  border-radius:10px;
  border:1px solid var(--stroke);
  background:var(--glass);
  color:var(--txt);
  cursor:pointer;
  transition:transform .06s ease, background .2s ease;
}
#modal-receta-detalle .r-botones button:hover{ background:var(--glass-2); }
#modal-receta-detalle .r-botones button:active{ transform:translateY(1px) scale(.99); }
#modal-receta-detalle .r-botones button:focus-visible{ outline:2px solid var(--opal-cyan); outline-offset:2px; }

/* Botón eliminar (✕) pegado a la derecha en INGREDIENTES */
#modal-receta-detalle .r-ing-item .r-ing-x{
  justify-self:end;           /* grid: al borde derecho */
  width:32px; height:32px;
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid var(--stroke);
  border-radius:8px;
  background:var(--glass);
  color:var(--txt);
  cursor:pointer;
  -webkit-tap-highlight-color: transparent;
}
#modal-receta-detalle .r-ing-item .r-ing-x:hover{ background:var(--glass-2); }
#modal-receta-detalle .r-ing-item .r-ing-x:focus-visible{ outline:2px solid var(--opal-cyan); outline-offset:2px; }

/* Botón eliminar (✕) pegado a la derecha en PASOS */
#modal-receta-detalle .r-paso-line .r-ing-x{
  margin-left:auto;           /* flex: empuja a la derecha */
  width:32px; height:32px;
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid var(--stroke);
  border-radius:8px;
  background:var(--glass);
  color:var(--txt);
  cursor:pointer;
  margin-top: 4px;
}
#modal-receta-detalle .r-paso-line .r-ing-x:hover{ background:var(--glass-2); }
#modal-receta-detalle .r-paso-line .r-ing-x:focus-visible{ outline:2px solid var(--opal-cyan); outline-offset:2px; }
/* =========================
   RECETA – INFO compacta (título sin salto + elipsis)
   ========================= */

/* Permite que el título pueda encoger y aplicar elipsis en grid */
.receta-card{
  grid-template-columns: 64px minmax(0,1fr) !important;
}
@media (min-width:600px){
  .receta-card{
    grid-template-columns: 80px minmax(0,1fr) auto !important;
  }
}

/* La columna de info puede reducirse y no romper el layout */
.receta-info{
  min-width: 0;               /* clave para elipsis en grids */
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Título en una sola línea, con puntos suspensivos si se pasa */
.receta-info .receta-titulo{
  display:block;
  width:100%;
  font-weight:800;
  line-height:1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* (Opcional) separa chips del título en móviles */
.receta-chips{ margin-top: -2px; }
/* =========================
   RECETA – INFO bajo título en 2 columnas
   y título sin recorte (multilínea)
   ========================= */

/* La tarjeta se estira en vertical sin romper layout */
.receta-card{ align-items:flex-start }

/* Título: que se lea entero (sin elipsis) */
.receta-info{ min-width:0 }
.receta-info .receta-titulo,
.receta-info strong{
  display:block;
  font-weight:800;
  line-height:1.2;
  white-space:normal;          /* permite varias líneas */
  overflow:visible;
  text-overflow:unset;
  margin-bottom:6px;           /* separa del bloque info */
}

/* Chips bajo el título en 2 columnas alineadas */
.receta-chips{
  grid-area:chips;
  display:grid !important;
  grid-template-columns:1fr 1fr;
  gap:6px 8px;
  align-items:center;
}
.receta-chip{ text-align:center }

/* (Opc) acciones quedan bajo chips; no cambia tu HTML */
.receta-acciones{ grid-area:actions }

/* =========================
   MODAL RECETA – Móvil vertical sin scroll horizontal
   ========================= */
@media (max-width: 520px){
  .modal-contenido-opal-horizontal{
    max-width:100%;
    border-radius:18px;
    overflow-x:hidden;
  }
  /* Una sola columna; nada se sale por los lados */
  #modal-receta-detalle .r-det{
    grid-template-columns:1fr !important;
    gap:12px;
    padding:12px;
  }
  #modal-receta-detalle .r-det-col-izq,
  #modal-receta-detalle .r-det-col-der{
    min-width:0;
  }
  /* Imagen responsive cuadrada y contenida */
  #modal-receta-detalle img#r-det-img{
    width:100%;
    max-width:420px;
    height:auto;
    aspect-ratio:1/1;
    object-fit:cover;
  }

  /* Ingredientes: columnas ajustadas y sin desbordes */
  #modal-receta-detalle .r-ing-item{
    grid-template-columns:26px minmax(0,1fr) 80px 60px 32px !important;
    align-items:center;
  }
  #modal-receta-detalle .r-ing-check-wrap{ z-index:1 } /* tap fiable */
  #modal-receta-detalle .r-ing-nom,
  #modal-receta-detalle .r-ing-cant,
  #modal-receta-detalle .r-ing-uni{
    min-width:0;
    word-break:break-word;
  }
  /* Pasos: margen y ajuste de texto */
  #modal-receta-detalle .r-pasos{ padding-left:18px }
  #modal-receta-detalle .r-paso .r-paso-txt{
    min-width:0; word-break:break-word;
  }
  /* Botonera del modal siempre a la derecha y visible */
  #modal-receta-detalle .r-botones{
    position:sticky; bottom:0; background:transparent; padding-top:4px;
    justify-content:flex-end;
  }
  #r-det-guardar, #r-det-cerrar {
    background-color: rgba(255, 255, 255, 0.237) !important;
  }
}

/* =========================
   (Compat) si no usaste .receta-titulo en el HTML
   el selector .receta-info strong ya se encarga.
   ========================= */
/* ====== Modal importar JSON receta ====== */
#modal-json{ position:fixed; inset:0; display:none; justify-content:center; align-items:center;
  background: radial-gradient(1200px 800px at 50% 0%, #0a172080 0%, #000a 70%); z-index:1003; padding:18px; }
#modal-json.abierto{ display:flex }
#modal-json .box{
  width:100%; max-width:520px; border-radius:18px; border:1px solid var(--stroke);
  background: linear-gradient(160deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  box-shadow: 0 24px 60px rgba(0,0,0,.6);
  display:flex; flex-direction:column; gap:10px; padding:12px;
}
#json-input{ width:100%; min-height:220px; resize:vertical;
  border-radius:12px; border:1px solid var(--stroke); background:rgba(255,255,255,.06); color:var(--txt); padding:10px; }
#modal-json .acciones{ display:flex; gap:8px; justify-content:flex-end }
#btn-json-cargar, #btn-json-cerrar{
  padding:8px 12px; border-radius:10px; border:1px solid var(--stroke);
  background:var(--glass); color:var(--txt); cursor:pointer;
}
#btn-json-cargar{ background:linear-gradient(90deg, var(--opal-cyan), var(--opal-blue)); color:#041119; border:none }
/* =========================
   RECETAS – tarjetas: separación, altura fija y título independiente
   ========================= */

/* 1) Unos px más entre tarjetas */
#lista-recetas{ gap:14px !important; }

/* 2) Misma altura para todas y layout estable en móvil */
.receta-card{
  position:relative;
  grid-template-columns:80px minmax(0,1fr) !important; /* img + contenido */
  height:150px;                 /* <- igual para todas */
  align-items:flex-start;
  overflow:hidden;             /* evita que nada sobresalga */
  margin-top: 10px;
}

/* Imagen fija */
.receta-card img{ width:80px; height:80px; object-fit:cover; border-radius:10px; border:1px solid var(--stroke); align-self:flex-start }

/* 3) Botones flotantes (no ocupan espacio del título) */
.receta-acciones{
  position:absolute; top:12px; right:1px;
  display:flex; gap:3px; flex-wrap:nowrap;
  z-index:2;
}

/* Reservar ancho para los botones para que el título nunca colisione */
.receta-info{ min-width:0; padding-right:170px; }

/* 4) Título se extiende libre (multilínea) sin que afecten los botones */
.receta-info .receta-titulo,
.receta-info strong{
  display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:3; /* hasta 3 líneas dentro de 120px */
  white-space:normal; overflow:hidden; text-overflow:ellipsis;
  font-weight:800; line-height:1.2; margin:0 0 4px 0;
}

/* 5) Chips anclados al borde inferior para que no cambie la altura */
.receta-chips{
  position:absolute; left:calc(12px + 125px + 10px); right:12px; bottom:12px;
  display:flex; gap:6px; flex-wrap:wrap;
}
/* =========================
   RECETAS – FIX MÓVIL
   ========================= */

/* más separación entre tarjetas */
#lista-recetas{ gap:14px !important; }

/* tarjeta: sin recorte y con altura mínima común */
.receta-card{
  align-items:flex-start;
  overflow:visible !important;    /* no ocultar botones */
  min-height:120px;               /* misma base; crece si el título es largo */
  grid-template-columns:64px minmax(0,1fr) !important;
  grid-template-areas:
    "img title"
    "img chips"
    "img actions" !important;     /* acciones en su propia fila */
}

/* imagen estable */
.receta-card img{ width:64px; height:64px; object-fit:cover; border-radius:10px; border:1px solid var(--stroke) }

/* título: multilínea, sin elipsis ni clamp */
.receta-info{ grid-area:title; min-width:0; padding-right:0 !important; }
.receta-info .receta-titulo,
.receta-info strong{
  display:block !important;
  white-space:normal !important;
  overflow:visible !important;
  text-overflow:clip !important;
  -webkit-line-clamp:unset !important;
  margin:0 0 6px 0;
  line-height:1.2;
  font-weight:800;
}

/* chips debajo del título */
.receta-chips{ grid-area:chips; display:flex; gap:6px; flex-wrap:wrap }

/* botones: fila propia; no afectan al ancho del título */
.receta-acciones{
  grid-area:actions;
  display:flex; gap:6px; flex-wrap:wrap;
  justify-content:flex-start;
  position:static !important;     /* deja de ser absoluto en móvil */
}

/* versión >=600px: layout más ancho, botones a la derecha */
@media (min-width:600px){
  .receta-card{
    grid-template-columns:80px minmax(0,1fr) auto !important;
    grid-template-areas:
      "img title actions"
      "img chips actions" !important;
  }
  .receta-card img{ width:80px; height:80px }
  .receta-acciones{ justify-content:flex-end }
}
/* =========================
   RECETAS – Chips bajo título, sin solapes
   ========================= */

/* Layout base: img | (título / chips / acciones) */
.receta-card{
  align-items:flex-start;
  grid-template-columns:64px minmax(0,1fr) !important;
  grid-template-areas:
    "img title"
    "img chips"
    "img actions" !important;
  gap:0px 10px;
  min-height:120px;
}

/* Imagen estable */
.receta-card img{ grid-area:img; width:64px; height:64px; object-fit:cover }

/* Título: multilínea, sin elipsis */
.receta-info{
  grid-area:title; min-width:0;
  padding-right:0 !important;    /* anulamos reservas antiguas */
}
.receta-info .receta-titulo,
.receta-info strong{
  display:block !important;
  white-space:normal !important;
  overflow:visible !important;
  text-overflow:clip !important;
  -webkit-line-clamp:unset !important;
  margin:0; line-height:1.2; font-weight:800;
}

/* CHIPS: fila propia bajo el título */
.receta-chips{
  grid-area:chips;
  position:static !important;    /* anula posicionamiento absoluto anterior */
  left:auto !important; right:auto !important; bottom:auto !important;
  display:flex !important; flex-direction: row; gap:6px; margin:20px 0px 0px;
}
.receta-chip{
  padding:4px 4px; border-radius:8px; border:1px solid var(--stroke);
  background:rgba(255,255,255,.04); font-size:12px;
}

/* Botones: tercera fila; no interfieren con el título */
.receta-acciones{
  grid-area:actions;
  position:static !important;
  display:flex; gap:6px; flex-wrap:wrap; margin-top:0px;
}

/* Desktop: imagen/ título/ chips a la izquierda; botones a la derecha */
@media (min-width:600px){
  .receta-card{
    grid-template-columns:80px minmax(0,1fr) auto !important;
    grid-template-areas:
      "img title actions"
      "img chips  actions" !important;
  }
  .receta-card img{ width:80px; height:80px }
  .receta-acciones{ justify-content:flex-end }
}
